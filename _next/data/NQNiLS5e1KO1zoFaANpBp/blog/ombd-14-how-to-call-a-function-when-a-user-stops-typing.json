{"pageProps":{"post":{"slug":"ombd-14-how-to-call-a-function-when-a-user-stops-typing","content":"<h4>We’ll learn how to implement a browser auto-saving draft system in JavaScript</h4>\n<p><img src=\"/content/blog/ombd-14-how-to-call-a-function-when-a-user-stops-typing/images/0.png\" alt=\"\"></p>\n<p>Art by my buddy <a href=\"https://www.instagram.com/loornicolas/\">Loor Nicolas</a></p>\n<h4>THE PROBLEM</h4>\n<p>We are implementing a text editor with a Google-Docs-like draft system, where content gets saved server-side when the user stops typing for a second.</p>\n<h4>A SOLUTION</h4>\n<p>We are going to use the <code>keyup</code> event and <code>window.setTimeout</code> .</p>\n<p>The key to this snippet is that the <code>timerId</code> has to be set declared in the scope of the <code>keyup</code> callback, in order to be reassigned to the new timeout id every time the <code>keyup</code> callback is fired again.</p>\n<p>Here’s a demo on CodePen:</p>\n<p>Call function when the user stops typing.</p>\n<div class=\"remark-highlight\"><pre class=\"language-com\"><code class=\"language-com\">// Declare a new variable that will get reassigned later with the timeout id\nlet timerId\n\n// Get the DOM Node of the input area and listen for a keyup event\ndocument.querySelector(&#x26;#39;textarea&#x26;#39;).addEventListener(&#x26;#39;keyup&#x26;#39;, () =&#x26;gt; {\n  // Clear timeout to callback, doesn&#x26;#39;t do anything on first run since timerId is undefined\n  clearTimeout(timerId)\n  // Set timerId to fire callback in one second, unless another keyup event is triggered\n  timerId = window.setTimeout(renderCurrentTime, 1000)\n})\n\n// Callback that will get fired 1s after typing\nfunction renderCurrentTime () {\n  // TODO: Save note to server\n  document.querySelector(&#x26;#39;time&#x26;#39;).textContent = new Date().toLocaleString()\n}</code></pre></div>\n","frontmatter":{"title":"OMBD#14: How To Call a Function When a User Stops Typing","spoiler":"We’ll learn how to implement a browser auto-saving draft system in JavaScript","date":"2021-04-21T13:12:45.974Z"}},"previous":{"slug":"trying-to-write-every-day-heres-how-to-stick-to-it","frontmatter":{"title":"Trying To Write Every Day? Here’s How To Stick to It","spoiler":"Many people struggle to build a writing habit. I did too, but I solved it with this simple mantra","date":"2021-04-21T13:06:03.465Z"}},"next":{"slug":"cdns-a-deep-dive","frontmatter":{"title":"CDNs — A Deep Dive","spoiler":"You’ve used them before but you’re not completely sure what they are, here are some answers.","date":"2021-04-21T23:45:16.803Z"}}},"__N_SSG":true}