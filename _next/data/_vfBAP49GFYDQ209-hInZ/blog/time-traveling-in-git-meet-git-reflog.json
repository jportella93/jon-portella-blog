{"pageProps":{"post":{"slug":"time-traveling-in-git-meet-git-reflog","content":"<h4>Letâ€™s learn to use the power of this advanced tool for Git disasterâ€‘saving</h4>\n<p><img src=\"/content/blog/time-traveling-in-git-meet-git-reflog/images/0.png\" alt=\"\"></p>\n<h4>THE PROBLEM</h4>\n<p>A local branch deleted by accident, squashed commits that we would like to be un-squashedâ€¦ when a catastrophe occurs, wouldnâ€™t it be great if we could <strong>time-travel in Git</strong>?</p>\n<h4>A SOLUTION</h4>\n<p>Letâ€™s learn how to use <code>git reflog</code>. First, abit of context.</p>\n<p>Reference logs, or â€œreflogsâ€, record when the tips of branches and other references were updated in the local repository.</p>\n<p><code>git reflog</code> by default targets HEADâ€Šâ€”â€Ša symbolic reference to the currently active branchâ€Šâ€”â€Šbut other branches, tags, remotes, and the Git stash can also be targeted.</p>\n<p><code>git reflog</code> shows â€œmovementsâ€ with the syntax <code>name@{qualifier}</code>. E.g. <code>HEAD@{2}</code> means â€œwhere HEAD used to be two moves agoâ€.</p>\n<p>Letâ€™s put it into practice.</p>\n<h4>Recovering a locally deletedÂ branch</h4>\n<p>Weâ€™ve deleted a local branch, how can we recover it?</p>\n<div class=\"remark-highlight\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">git</span> branch <span class=\"token parameter variable\">-D</span> navbar-feature\n</code></pre></div>\n<p>We can use <code>git reflog</code> to find a point in history to timeâ€‘travel to. We see that one move ago we did the last commit on that branch that we just deleted.</p>\n<div class=\"remark-highlight\"><pre class=\"language-text\"><code class=\"language-text\">3b7a6fdb (HEAD -&#x26;gt; master) HEAD@{0}: checkout: moving from navbar-feature to master9a07e99f HEAD@{1}: commit: feat: add Navbar3b7a6fdb (HEAD -&#x26;gt; master) HEAD@{2}: checkout: moving from master to navbar-feature</code></pre></div>\n<p>So we can just create a new branch with the content of that point in history:</p>\n<div class=\"remark-highlight\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">git</span> checkout <span class=\"token parameter variable\">-b</span> navbar-feature HEAD@<span class=\"token punctuation\">{</span><span class=\"token number\">1</span><span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>Fantastic, we have recovered our branch and its commits!</p>\n<h4>Recovering squashedÂ commits</h4>\n<p>We have 3 commits:</p>\n<div class=\"remark-highlight\"><pre class=\"language-text\"><code class=\"language-text\">747ef1e feat: add Button19d9327 feat: add Navbareffb3b4 initial commit</code></pre></div>\n<p>We realize that we forget to add something on the Navbar commit, so we add those changes and we commit with a fixup <code>git commit --fixup 19d9327</code>. Our history now:</p>\n<div class=\"remark-highlight\"><pre class=\"language-text\"><code class=\"language-text\">c2149d1 fixup! feat: add Navbar747ef1e feat: add Button19d9327 feat: add Navbareffb3b4 initial commit</code></pre></div>\n<p>And now, to clean up our history by squashing this last commit with its reference, we use<code>git rebase --autosquash --interactive HEAD~4</code>. Our history is clean now:</p>\n<div class=\"remark-highlight\"><pre class=\"language-text\"><code class=\"language-text\">de1e9de feat: add Buttonb3b4932 feat: add Navbareffb3b4 initial commit</code></pre></div>\n<p>However, how can we go back to our history preâ€‘rebase? <code>git reflog</code> shows that when we committed that fix was 4 moves ago <code>HEAD@{4}</code>Â , while the most recent moves are part of the rebase.</p>\n<div class=\"remark-highlight\"><pre class=\"language-text\"><code class=\"language-text\">4610b383 HEAD@{0}: rebase -i (finish): returning to refs/heads/master4610b383 HEAD@{1}: rebase -i (pick): feat: add Navbar52d0c48c HEAD@{2}: rebase -i (fixup): feat: add Navbar07097c96 HEAD@{3}: rebase -i (start): checkout HEAD~4c2149d1 HEAD@{4}: commit: fixup! feat: add Navbar</code></pre></div>\n<p>So we can just <code>git reset HEAD@{4}</code> and we have recovered our history pre-squash! This is what <code>git log</code> shows now:</p>\n<div class=\"remark-highlight\"><pre class=\"language-text\"><code class=\"language-text\">c2149d1 fixup! feat: add Navbar747ef1e feat: add Button19d9327 feat: add Navbareffb3b4 initial commit</code></pre></div>\n<h4>Thanks for reading! Keep learning, and donâ€™t stop codingÂ ğŸ˜Š</h4>\n<hr>\n<p><strong>Resources</strong><a href=\"https://git-scm.com/docs/git-reflog\">https://git-scm.com/docs/git-reflog</a><a href=\"https://www.atlassian.com/git/tutorials/rewriting-history/git-reflog\">https://www.atlassian.com/git/tutorials/rewriting-history/git-reflog</a><a href=\"https://www.edureka.co/blog/git-reflog/\">https://www.edureka.co/blog/git-reflog/</a></p>\n","frontmatter":{"title":"Time-Traveling in Git? Meet Git Reflog","spoiler":"Letâ€™s learn to use the power of this advanced tool for Git disasterâ€‘saving","date":"2021-04-06T16:00:13.759Z"}},"previous":{"slug":"omonp-3-building-a-carousel-with-swiper","frontmatter":{"title":"Building a carousel with Swiper","spoiler":"Letâ€™s build a touch-triggered image slider with lazy loading, navigation, and pagination, in one minute.","date":"2021-04-06T01:28:57.384Z"}},"next":{"slug":"use-gist-paste-to-save-text-files-as-github-gists-from-the-command-line","frontmatter":{"title":"Use gist-paste to Save Text Files as GitHub Gists From the Command Line","spoiler":"A quick tip to save time on saving and sharing documents","date":"2021-04-20T15:19:33.764Z"}}},"__N_SSG":true}