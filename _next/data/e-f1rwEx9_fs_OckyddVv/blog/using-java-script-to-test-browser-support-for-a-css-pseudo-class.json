{"pageProps":{"post":{"slug":"using-java-script-to-test-browser-support-for-a-css-pseudo-class","content":"<p><img src=\"/jon-portella-blog/content/blog/using-java-script-to-test-browser-support-for-a-css-pseudo-class/images/0.png\" alt=\"\"></p>\n<p>Illustration by my buddy <a href=\"https://www.instagram.com/loornicolas/\">Loor Nicolas</a></p>\n<hr>\n<h4>THE PROBLEM</h4>\n<p>Some browsers have native support for pseudo-elements that others don’t. This is the case, for example, of <code>::ms-reveal</code> , the little eye that appears to show/hide password input fields in Microsoft browsers (Internet Explorer and Edge).</p>\n<p><img src=\"/jon-portella-blog/content/blog/using-java-script-to-test-browser-support-for-a-css-pseudo-class/images/1.png\" alt=\"\"></p>\n<p>Edge’s native password reveal feature.</p>\n<p>The problem with this native feature is that if your front-end has its own password reveal feature, you could end up with a layout like this one:</p>\n<p><img src=\"/jon-portella-blog/content/blog/using-java-script-to-test-browser-support-for-a-css-pseudo-class/images/2.png\" alt=\"\"></p>\n<p>Oops! Edge’s native password reveal feature and our own’s.</p>\n<h4>A SOLUTION</h4>\n<p>A quick fix would be to just hide the native reveal password:</p>\n<div class=\"remark-highlight\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\"><span class=\"token pseudo-element\">::-ms-reveal</span></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">display</span><span class=\"token punctuation\">:</span> none<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>But why are we so quick to discard a native feature? They’re great! In the end, those are the ones that have been developed and tested to work flawlessly by the same team that has built the browser.</p>\n<h4>A (NATIVE FRIENDLY) SOLUTION</h4>\n<p>So in this case, a good approach would be to test if the browser has the<code>::ms-reveal</code> feature, and only show our own if it doesn’t.</p>\n<div class=\"remark-highlight\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token doc-comment comment\">/**\n * Test for pseudo-class support on the current client\n * <span class=\"token keyword\">@param</span> <span class=\"token class-name\"><span class=\"token punctuation\">{</span>String<span class=\"token punctuation\">}</span></span> <span class=\"token parameter\">pseudoClass</span> - The pseudo-class to test\n * <span class=\"token keyword\">@return</span> <span class=\"token class-name\"><span class=\"token punctuation\">{</span>Boolean<span class=\"token punctuation\">}</span></span>\n */</span>\n<span class=\"token keyword module\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">supportsPseudoClass</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">pseudoClass</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Get the document stylesheet</span>\n  <span class=\"token keyword\">const</span> ss <span class=\"token operator\">=</span> <span class=\"token dom variable\">document</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">styleSheets</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// Test the pseudo-class by trying to add and remove a rule to the stylesheet</span>\n  <span class=\"token keyword\">let</span> formattedPseudoClass <span class=\"token operator\">=</span> pseudoClass<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword control-flow\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword control-flow\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\"><span class=\"token anchor function\">^</span>:</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">test</span><span class=\"token punctuation\">(</span>formattedPseudoClass<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      formattedPseudoClass <span class=\"token operator\">=</span> <span class=\"token string\">':'</span> <span class=\"token operator\">+</span> formattedPseudoClass<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    ss<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">insertRule</span><span class=\"token punctuation\">(</span><span class=\"token string\">'html'</span> <span class=\"token operator\">+</span> formattedPseudoClass <span class=\"token operator\">+</span> <span class=\"token string\">'{}'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    ss<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">deleteRule</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword control-flow\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword control-flow\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword control-flow\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n</code></pre></div>\n<p>Now you can just check for <code>::ms-reveal</code> and roll your own if it doesn’t exist!</p>\n<div class=\"remark-highlight\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// ...</span>\n\n<span class=\"token keyword\">const</span> hasNativePasswordReveal <span class=\"token operator\">=</span> <span class=\"token function\">supportsPseudoClass</span><span class=\"token punctuation\">(</span><span class=\"token string\">'::ms-reveal'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> rightSlot <span class=\"token operator\">=</span> hasNativePasswordReveal\n  <span class=\"token operator\">?</span> <span class=\"token keyword null nil\">null</span>\n  <span class=\"token operator\">:</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span><span class=\"token class-name\">PasswordReveal</span></span> <span class=\"token punctuation\">/></span></span>\n\n<span class=\"token keyword control-flow\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span><span class=\"token class-name\">PasswordInput</span></span> <span class=\"token attr-name\">rightSlot</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>rightSlot<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span>\n\n<span class=\"token comment\">// ...</span>\n</code></pre></div>\n<hr>\n","frontmatter":{"title":"Using JavaScript To Test Browser Support for a CSS Pseudo-Class","spoiler":"An obscure (but effective) way to do CSS feature detection with JavaScript. In the example, we test for a feature that only Microsoft browsers have.","date":"2021-02-23T13:47:47.254Z"}},"previous":{"slug":"the-ugliest-6-reasons-to-not-enrol-in-a-coding-bootcamp","frontmatter":{"title":"The Ugliest 6 Reasons To Not Enrol In A Coding Bootcamp.","spoiler":"There are some ugly parts that people don’t talk about. Before deciding to enrol, mind all the possible outcomes.","date":"2020-10-02T10:03:34.981Z"}},"next":{"slug":"persist-css-changes-done-in-chrome-s-dev-tools","frontmatter":{"title":"Persist CSS Changes Done in Chrome’s Dev-Tools","spoiler":"Avoid losing all those changes on the elements tab if you accidentally reload your browser","date":"2021-02-24T13:38:12.609Z"}}},"__N_SSG":true}