{"pageProps":{"post":{"slug":"9-things-i-learned-in-april-2019","content":"<p><img src=\"./images/9-loor-nicolas.jpg\" alt=\"\"></p>\n<p style=\"text-align:center\">Illustration by <a href=\"https://www.instagram.com/loornicolas/\" target=\"_blank\">loornicolas</a><p>\n<h2>1. How to use CSS Modules in create-react-app.</h2>\n<p>With CSS Modules you can make CSS classes with a component scope. This allows to use simple class names and avoid name collisions between components. Following the <a href=\"https://facebook.github.io/create-react-app/docs/adding-a-css-modules-stylesheet\">Create React App docs</a>:</p>\n<div class=\"remark-highlight\"><pre class=\"language-CSS\"><code class=\"language-CSS\">/* Button.module.css */\n.error {\n  background-color: red;\n}</code></pre></div>\n<div class=\"remark-highlight\"><pre class=\"language-CSS\"><code class=\"language-CSS\">/* another-stylesheet.css */\n.error {\n  background-color: blue;\n}</code></pre></div>\n<div class=\"remark-highlight\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// Button.js</span>\n<span class=\"token keyword module\">import</span> <span class=\"token imports\"><span class=\"token maybe-class-name\">React</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token maybe-class-name\">Component</span> <span class=\"token punctuation\">}</span></span> <span class=\"token keyword module\">from</span> <span class=\"token string\">'react'</span>\n<span class=\"token keyword module\">import</span> <span class=\"token imports\">styles</span> <span class=\"token keyword module\">from</span> <span class=\"token string\">'./Button.module.css'</span> <span class=\"token comment\">// Import css modules stylesheet as styles</span>\n<span class=\"token keyword module\">import</span> <span class=\"token string\">'./another-stylesheet.css'</span> <span class=\"token comment\">// Import regular stylesheet</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Button</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// reference as a js object</span>\n    <span class=\"token keyword control-flow\">return</span> <span class=\"token operator\">&#x3C;</span>button className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span><span class=\"token property-access\">error</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span><span class=\"token known-class-name class-name\">Error</span> <span class=\"token maybe-class-name\">Button</span><span class=\"token operator\">&#x3C;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span> <span class=\"token comment\">// Background color will be red</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>To achieve this, you just need to change the file name of the stylesheet from <code>Button.css</code> to <code>Button.module.css</code>. At compile time, the class name will be replaced by a unique class name following the format <code>[filename]\\_[classname]\\_\\_[hash]</code>.</p>\n<h2>2. How to cleanup local Git branches</h2>\n<p>To delete all local branches except <code>master</code> and <code>feat/something-neat</code>:</p>\n<div class=\"remark-highlight\"><pre class=\"language-shell\"><code class=\"language-shell\">$ <span class=\"token function\">git</span> branch <span class=\"token operator\">|</span> <span class=\"token function\">egrep</span> <span class=\"token parameter variable\">-v</span> <span class=\"token string\">'master|feat/something-neat'</span> <span class=\"token operator\">|</span> <span class=\"token function\">xargs</span> <span class=\"token function\">git</span> branch <span class=\"token parameter variable\">-D</span>\n</code></pre></div>\n<p>Let's break it down:</p>\n<ol>\n<li><code>git branch</code> shows all your local branches, this gets piped to <code>egrep</code></li>\n<li><code>egrep</code> will return every branch that matches any identifier inside the quotes, which are separated by a <code>|</code>. The flag <code>-v</code> makes it return every branch that does <strong>not</strong> match the identifiers. This gets piped to <code>xargs</code></li>\n<li><code>xargs</code> passes branch names as arguments to <code>git branch -D</code>, which deletes the branch</li>\n</ol>\n<p>It's a good idea to first run <code>git branch | egrep -v 'master|feat/something-neat'</code> to see which branches will be deleted, and then run the full command.</p>\n<p>Read more about <code>xargs</code> <a href=\"https://shapeshed.com/unix-xargs/\">here</a>.</p>\n<h2>3. How to build searchable components using Fuse.js.</h2>\n<p>I had to create a search component which included an input field. Typing on the input had to reveal fuzzy searches from a JSON file on another component.</p>\n<p>This nice little package called <a href=\"https://fusejs.io/\">Fuse.js</a> made it a breeze. it has a handful of custom options and parameters, such as fuzzynes/exactitude of the match, max number of items or priorititary items. Definitely worth checking it out!</p>\n<h2>4. How to fight and plug into Chrome autocomplete feature.</h2>\n<p>There's a <a href=\"http://webagility.com/posts/the-ultimate-list-of-hacks-for-chromes-forced-yellow-background-on-autocompleted-inputs\">long list of hacks</a> to fight Chrome input field autocomplete styling. However, my problem was that I had to execute some JavaScript when this action triggered. But Chrome just adds a class to the autocompleted element, it doesn't trigger any event when autocompletes, so I didn't know how to detect it without polling.</p>\n<p>After some research, I finally found a smart hack to plug into this event: It turns out you can listen for CSS animations events. So the trick is adding an empty CSS animation to the Chrome autocomplete class and listen for an animation start event with a JavaScript event listener. Then use it as a hook for whatever you need it. Really smart!</p>\n<p>Check the original -and better worded- explanation <a href=\"https://medium.com/@brunn/detecting-autofilled-fields-in-javascript-aed598d25da7\">here</a>.</p>\n<h2>5. How to git ignore momentarily.</h2>\n<p>There are some files that should be always ignored by Git, that's why we include them in <code>.gitignore</code>. But what if you want to ignore a file just for a while? This happened to me with a compiled file created automatically by a task runner.</p>\n<p>To ignore:</p>\n<div class=\"remark-highlight\"><pre class=\"language-shell\"><code class=\"language-shell\">$ <span class=\"token function\">git</span> update-index --assume-unchanged <span class=\"token string\">\"src/ignore.js\"</span>\n</code></pre></div>\n<p>To stop ignoring:</p>\n<div class=\"remark-highlight\"><pre class=\"language-shell\"><code class=\"language-shell\">$ <span class=\"token function\">git</span> update-index --no-assume-unchanged <span class=\"token string\">\"src/ignore.js\"</span>\n</code></pre></div>\n<h2>6. How to make MacOS Spotlight suck less.</h2>\n<p>Honestly, forget about Spotlight and try <a href=\"https://www.alfredapp.com/\">Alfred</a>. Not only has a myriad customizations but also, and this was the deal breaker for me, it appears instantly when pressing the key.</p>\n<p>Because waiting ~400ms for Spotlight to appear when pressing the key is just too much.</p>\n<p>We are busy people, Apple!!</p>\n<h2>7. How to reorder and fixup local git commits.</h2>\n<p>Let's say we are starting a website. We have 3 commits:</p>\n<div class=\"remark-highlight\"><pre class=\"language-shell\"><code class=\"language-shell\">747ef1e feat: <span class=\"token function\">add</span> Button\n19d9327 feat: <span class=\"token function\">add</span> Navbar\neffb3b4 initial commit\n</code></pre></div>\n<p>But then we realise that we forget to commits some changes on the Navbar commit. What do we do?\nWe could make a new commit with a message like <code>git commit -m 'fix: missing changes on Navbar'</code>, but that commit wouldn't have any semantic value to the commit history and it'd only make it less clear.</p>\n<p>A proper solution would be to <strong>fixup</strong> the commit. We would do <code>git commit --fixup 19d9327</code>. Our history would be like this now:</p>\n<div class=\"remark-highlight\"><pre class=\"language-shell\"><code class=\"language-shell\">c2149d1 fixup<span class=\"token operator\">!</span> feat: <span class=\"token function\">add</span> Navbar\n747ef1e feat: <span class=\"token function\">add</span> Button\n19d9327 feat: <span class=\"token function\">add</span> Navbar\neffb3b4 initial commit\n</code></pre></div>\n<p>And now, to squash this last commit with its reference, we would do <code>git rebase --autosquash --interactive effb3b4</code>. This will open Vim or other terminal text editor, just save the changes pressing <code>ZZ</code> and your history now will look like this:</p>\n<div class=\"remark-highlight\"><pre class=\"language-shell\"><code class=\"language-shell\">de1e9de feat: <span class=\"token function\">add</span> Button\nb3b4932 feat: <span class=\"token function\">add</span> Navbar\neffb3b4 initial commit\n</code></pre></div>\n<p>Note that the commith hashes have changed, so only do this with commits that hasn't been pushed yet.</p>\n<p>Thanks to <a href=\"https://blog.sebastian-daschner.com/entries/git-commit-fixup-autosquash\">Sebastian Daschner</a> for this knowledge!</p>\n<h2>8. How to concatenate commands in BASH</h2>\n<p>Using the <code>;</code> operator, the second command will run after the first command.</p>\n<div class=\"remark-highlight\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">cat</span> non_existing.txt <span class=\"token punctuation\">;</span> <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">'success!'</span>\n-<span class=\"token operator\">></span> cat: nonexisting.txt: No such <span class=\"token function\">file</span> or directory\n-<span class=\"token operator\">></span> success<span class=\"token operator\">!</span>\n</code></pre></div>\n<p>Using the <code>&#x26;&#x26;</code> operator, the second command will run <strong>only</strong> if the first command succeeds.</p>\n<div class=\"remark-highlight\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">cat</span> non_existing.txt <span class=\"token operator\">&#x26;&#x26;</span> <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">'success!'</span>\n-<span class=\"token operator\">></span> cat: nonexisting.txt: No such <span class=\"token function\">file</span> or directory\n</code></pre></div>\n<p>Using the <code>\\</code> operator, you can split your command in multiple lines for readability.</p>\n<div class=\"remark-highlight\"><pre class=\"language-unknown\"><code class=\"language-unknown\">$ echo \\\n$ hello world\n-&#x26;gt; hello world</code></pre></div>\n<h2>9. How to quickly start my work environment</h2>\n<p>There are a number of apps and programs that I use while working. Opening them one by one at the start of the day is a hassle and so is closing them at the end. So I made a bash script to automate this:</p>\n<p>For opening everything:</p>\n<div class=\"remark-highlight\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># in .bashrc</span>\n<span class=\"token builtin class-name\">alias</span> <span class=\"token assign-left variable\">work_on</span><span class=\"token operator\">=</span><span class=\"token string\">\"</span>\n<span class=\"token string\">open /Applications/Slack.app ; /</span>\n<span class=\"token string\">open /Applications/Mail.app ; /</span>\n<span class=\"token string\">open /Applications/Zeplin.app ; /</span>\n<span class=\"token string\">open /Applications/Postman.app ; /</span>\n<span class=\"token string\">open /Users/jon/Applications/Chrome\\ Apps.localized/StackEdit.app ; /</span>\n<span class=\"token string\">vmon</span>\n<span class=\"token string\">\"</span>\n\n<span class=\"token comment\"># in the CLI</span>\n$ work_on\n</code></pre></div>\n<p>Basically, you are passing the location of the app to the command <code>open</code> and concatenating the commands with <code>;</code>. Most of the apps live in <code>/Applications</code> but for example StackEdit, which is a Chrome App, lives in <code>/Users/jon/Applications/Chrome\\ Apps.localized</code></p>\n<p>The last one <code>vmon</code> is a custom alias for starting my virtual machine.</p>\n<p>For closing everything:</p>\n<div class=\"remark-highlight\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># in .bashrc</span>\n<span class=\"token builtin class-name\">alias</span> <span class=\"token assign-left variable\">work_off</span><span class=\"token operator\">=</span><span class=\"token string\">\"\nosascript -e 'quit app <span title=\"\\&#x22;\" class=\"token entity\">\\\"</span>Zeplin<span title=\"\\&#x22;\" class=\"token entity\">\\\"</span>' ; /\nosascript -e 'quit app <span title=\"\\&#x22;\" class=\"token entity\">\\\"</span>Mail<span title=\"\\&#x22;\" class=\"token entity\">\\\"</span>' ; /\nosascript -e 'quit app <span title=\"\\&#x22;\" class=\"token entity\">\\\"</span>Code<span title=\"\\&#x22;\" class=\"token entity\">\\\"</span>' ; /\nosascript -e 'quit app <span title=\"\\&#x22;\" class=\"token entity\">\\\"</span>Slack<span title=\"\\&#x22;\" class=\"token entity\">\\\"</span>' ; /\nosascript -e 'quit app <span title=\"\\&#x22;\" class=\"token entity\">\\\"</span>Postman<span title=\"\\&#x22;\" class=\"token entity\">\\\"</span>' ; /\nosascript -e 'quit app <span title=\"\\&#x22;\" class=\"token entity\">\\\"</span>StackEdit<span title=\"\\&#x22;\" class=\"token entity\">\\\"</span>' ; /\nvmoff\n\"</span>\n\n<span class=\"token comment\"># in the CLI</span>\n$ work_off\n</code></pre></div>\n<p>To close apps on macOS we can execute the <code>quit app</code> command with <code>osascript -e</code>.</p>\n<p>Note here that I'm also closing my text editor <code>osascript -e 'quit app \\\"Code\\\"'</code> but I'm not opening it in the previous command. This is because I have a custom alias to open the editor with every diferent repo, so each time it will be different on opening but it will be the same on closing.</p>\n<p>Again, the last one <code>vmoff</code> is a custom alias for stopping my virtual machine.</p>\n","frontmatter":{"title":"9 Things I Learned in April 2019","spoiler":"This time tips and tricks on CSS Modules, a lot of BASH and GIT stuff, macOS apps, using searchable components and fighting Chrome's autocomplete styling.","date":"2019-04-30T19:38:03.284Z"}},"previous":{"slug":"12-things-i-learned-in-march-2019","frontmatter":{"title":"12 Things I Learned in March 2019","spoiler":"Tips and tricks including but not limited to Pandas, JavaScript sliders and swipers, a flights API, BASH automations and some other nifty ideas.","date":"2019-03-31T19:38:03.284Z"}},"next":{"slug":"you-are-using-browser-events-wrong","frontmatter":{"title":"You are using browser events wrong","spoiler":"Stop listening.","date":"2019-05-15T19:38:03.284Z"}}},"__N_SSG":true}